{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Packetflow Homelab Documentation","text":""},{"location":"#welcome","title":"Welcome","text":"<p>Welcome to the documentation for the Packetflow Homelab. This project serves as a practical testing ground for network engineering concepts, specifically focusing on CCNA certification topics and IPv6 implementation. It's been quickly thrown together and is subject to many changes.</p>"},{"location":"#lab-overview","title":"Lab Overview","text":"<p>The homelab is designed to mimic a small enterprise network with distinct layers for Core, Distribution, and Access.</p> <ul> <li>Primary Router: Fortinet FortiGate 40F (handling Routing, Security, SD-WAN).</li> <li>Core Switching: Ubiquiti EdgeSwitch 8 PoE (handling VLANs, PoE).</li> <li>Wireless/Access: MikroTik hAP ac lite (handling WiFi, Bridge Filtering).</li> </ul>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<p>The documentation is currently focused on networking, and has been structured into sections within the Network module:</p>"},{"location":"#1-hardware","title":"1. Hardware","text":"<p>Detailed inventory of all physical devices, cabling maps, and the physical topology showing how the ISP Modem, FortiGate, and downstream switches connect.</p>"},{"location":"#2-addressing","title":"2. Addressing","text":"<p>Defines the Logical Topology.</p> <ul> <li>VLANs: Segmentation for Default, Guest, Servers, DMZ, and Management.  </li> <li>IPv6 Strategy: Explains the decision to use Unique Local Addressing (ULA) (<code>fdb1:6575:ad8a::/48</code>)     due to ISP (modem) constraints, ensuring stable internal IPv6 routing and learning opportunities.</li> </ul>"},{"location":"#3-routing-switching","title":"3. Routing &amp; Switching","text":"<p>Covers routing and switching configuration and decisions inside the network.</p> <ul> <li>Switching: 802.1Q Trunks, Native VLAN security, and Bridge VLAN Filtering on MikroTik.  </li> <li>Routing: Inter-VLAN routing and IPv6 Router Advertisements (RA).</li> </ul>"},{"location":"#4-security","title":"4. Security","text":"<p>Documents the Security policies used.  </p> <ul> <li>Zones: Trusted vs Untrusted vs Management.  </li> <li>Policies: Specific firewall rules allowing traffic (e.g., VLAN 10/20 to Internet) while blocking inter-VLAN access by default.  </li> </ul>"},{"location":"#5-sd-wan","title":"5. SD-WAN","text":"<p>Configuration of the <code>virtual-wan-link</code> interface to abstract WAN connectivity and prepare for future multi-path scenarios.  </p>"},{"location":"#6-wireless","title":"6. Wireless","text":"<p>Design decisions for the <code>Declerck-Cardon</code> SSID, frequency planning, and security standards.  </p>"},{"location":"#future-plans","title":"Future Plans","text":"<ul> <li>Add another hAP ac lite to act as second switch.</li> <li>Add another router to act as remote/branch office router.</li> <li>Replace my current Telenet modem with a new one to support IPv6 Global Unicast Addressing in all VLANs.     So far i've managed to get it working in one VLAN.  </li> <li>Setup a DNS server with dynamic DNS.</li> </ul>"},{"location":"#disclaimer","title":"Disclaimer","text":"<p>The documentation is written with the help of Google Gemini. The decisions made are based on my own knowledge and experience. </p>"},{"location":"01_network/01_hardware/","title":"Hardware &amp; Physical Infrastructure","text":""},{"location":"01_network/01_hardware/#1-overview","title":"1. Overview","text":"<p>This document defines the physical layer (OSI Layer 1) of the Packetflow Homelab. It covers hardware specifications, physical cabling, and port assignments across the core infrastructure.  </p>"},{"location":"01_network/01_hardware/#2-hardware-inventory","title":"2. Hardware Inventory","text":"Device Role Make / Model Hostname Description / Notes Router / Firewall Fortinet FortiGate 40F <code>FW01</code> Main internet gateway and security appliance. Core Switch Ubiquiti EdgeSwitch 8 PoE <code>ALS01</code> Managed L2 switch providing PoE to APs and connectivity to servers. Access Point MikroTik hAP ac lite <code>AP01</code> Dual-concurrent Access Point. Used for learning MikroTik RouterOS. Compute Generic Servers Various Hypervisors and storage servers. <p>Note: All hosts are part of the <code>lab.internal.packetflow.be</code> domain. So <code>FW01</code> can be reached internaly as <code>fw01.lab.internal.packetflow.be</code>.</p>"},{"location":"01_network/01_hardware/#3-physical-topology","title":"3. Physical Topology","text":"<p>The network centers around a \"Core Rack\" configuration where the FortiGate handles WAN and the EdgeSwitch handles internal distribution.</p> <p>[Image Placeholder: Physical Topology Diagram]</p>"},{"location":"01_network/01_hardware/#4-cabling-port-map","title":"4. Cabling &amp; Port Map","text":""},{"location":"01_network/01_hardware/#fortigate-40f","title":"FortiGate 40F","text":"Port Type Connected Device Notes WAN RJ45 ISP Modem Public IP via DHCP/PPPoE 1 RJ45 AP01 HAP AC Lite currently used as AP 2 RJ45 ALS01 Main Trunk Link (Carries all VLANs) 3 RJ45 Reserved Emergency Management / Direct Access"},{"location":"01_network/01_hardware/#ubiquiti-edgeswitch-8-poe","title":"Ubiquiti EdgeSwitch 8 PoE","text":"Port Profile Connected Device PoE Mode 1 Trunk uplink to FW01 POE+ (0W) 2-8 Access/Trunk Servers / IoT As needed"},{"location":"01_network/01_hardware/#mikrotik-hap-ac-lite-ap01","title":"MikroTik hAP ac lite (AP01)","text":"<p>Radio Configuration: - wlan2 (5GHz): High-speed clients</p>"},{"location":"01_network/02_addressing/","title":"Network Addressing &amp; VLANs","text":""},{"location":"01_network/02_addressing/#1-overview","title":"1. Overview","text":"<p>This document details the logical segmentation of the network, including VLAN assignments, IPv4 subnetting, and the IPv6 addressing strategy.</p>"},{"location":"01_network/02_addressing/#2-vlan-configuration","title":"2. VLAN Configuration","text":"<p>The network follows a strict segmentation policy using hierarchical supernets and VLANs.</p>"},{"location":"01_network/02_addressing/#21-supernets","title":"2.1. Supernets","text":"Supernet Name Description <code>10.0.0.0/8</code> PacketFlow Global Supernet <code>10.10.0.0/16</code> Home Office Primary Site (Lab &amp; Residence) <code>10.20.0.0/16</code> Branch Office Remote Site"},{"location":"01_network/02_addressing/#22-vlan-assignment","title":"2.2. VLAN Assignment","text":"VLAN ID Name Home Office (10.10.x.x) Branch Office (10.20.x.x) IPv6 Subnet Description 10 <code>Home</code> <code>10.10.10.0/24</code> <code>10.20.10.0/24</code> <code>...:10::/64</code> Default Trusted Network. \"Office\" devices. 20 <code>Guest</code> <code>10.10.20.0/23</code> <code>10.20.20.0/23</code> <code>...:20::/64</code> Guest Network. Personal devices and WiFi - Isolated internet access. 30 <code>Servers</code> <code>10.10.30.0/24</code> N/A <code>...:30::/64</code> Servers. Raspberry pi's, internal services hosted in docker containers and VMs. 35 <code>DMZ</code> <code>10.10.35.0/24</code> N/A <code>...:35::/64</code> DMZ. Public facing services. 99 <code>MGMT</code> <code>10.10.99.0/24</code> <code>10.20.99.0/24</code> <code>...:99::/64</code> Management. Management of Network Infrastructure. 666 <code>Blackhole</code> N/A N/A N/A Dead VLAN. Used for Native VLAN security."},{"location":"01_network/02_addressing/#3-ipv6-strategy","title":"3. IPv6 Strategy","text":""},{"location":"01_network/02_addressing/#31-design-choices","title":"3.1. Design Choices","text":"<p>Due to ISP constraints and difficulties with robust Prefix Delegation (PD) / GUA stability, the network currently utilizes Unique Local Addresses (ULA) for consistent internal addressing.</p>"},{"location":"01_network/02_addressing/#32-prefix-assignment","title":"3.2. Prefix Assignment","text":"<ul> <li>ULA Prefix: <code>fdb1:6575:ad8a::/48</code></li> <li>Allocation Method: Static assignment per VLAN.</li> </ul>"},{"location":"01_network/02_addressing/#33-subnetting-plan","title":"3.3. Subnetting Plan","text":"VLAN IPv6 Subnet 10 (Home) <code>fdb1:6575:ad8a:10::/64</code> 20 (Office) <code>fdb1:6575:ad8a:20::/64</code> 30 (Servers) <code>fdb1:6575:ad8a:30::/64</code> 35 (DMZ) <code>fdb1:6575:ad8a:35::/64</code> 99 (Mgmt) <code>fdb1:6575:ad8a:99::/64</code>"},{"location":"01_network/02_addressing/#4-key-static-ips-legacy-ipv4","title":"4. Key Static IPs (Legacy IPv4)","text":"Device IP Address VLAN Notes FortiGate 40F <code>10.10.10.1</code> 10 Primary Gateway FortiGate 40F <code>10.10.99.1</code> 99 Primary Gateway Management EdgeSwitch <code>10.10.99.2</code> 99 Core Switch Management AP01 (MikroTik) <code>DHCP</code> 99 Currently dynamic"},{"location":"01_network/02_addressing/#5-troubleshooting-issues","title":"5. Troubleshooting &amp; Issues","text":""},{"location":"01_network/02_addressing/#51-ipv6-gua-slaac-failure","title":"5.1. IPv6 GUA / SLAAC Failure","text":"<p>Issue: Initial attempts to configure Global Unicast Addresses (GUA) via SLAAC failed. Root Cause: ISP modem/connection constraints prevented proper Prefix Delegation or routing of the delegated prefix. Resolution: Switched to ULA (<code>fdb1:6575:ad8a::/48</code>) to ensure stable internal IPv6 connectivity and addressing, allowing for learning/testing of IPv6 mechanisms (RA, DHCPv6) independent of the ISP connection.</p>"},{"location":"01_network/03_routing_switching/","title":"Routing &amp; Switching","text":""},{"location":"01_network/03_routing_switching/#1-overview","title":"1. Overview","text":"<p>This document covers the Layer 2 (Data Link) and Layer 3 (Network) forwarding logic. The network uses Fortinet for L3 routing/firewalling and Ubiquiti/MikroTik for L2 switching and wireless bridging.</p>"},{"location":"01_network/03_routing_switching/#2-layer-2-switching-logic","title":"2. Layer 2: Switching Logic","text":""},{"location":"01_network/03_routing_switching/#21-ubiquiti-edgeswitch-core","title":"2.1. Ubiquiti EdgeSwitch (Core)","text":"<p>The EdgeSwitch acts as the central L2 distribution point.</p> <ul> <li>VLANs: 10, 20, 30, 35, 99 defined database.</li> <li>Trunk Ports: Tagged traffic for all active VLANs. </li> <li>Native VLAN: Set to 666 (Blackhole) on uplinks to prevent VLAN hopping attacks.</li> <li>Access Ports: Untagged for specific VLANs (e.g., Server links).</li> <li>Spanning Tree: RSTP enabled to prevent loops.</li> </ul>"},{"location":"01_network/03_routing_switching/#22-mikrotik-access","title":"2.2. MikroTik (Access)","text":"<p>The MikroTik <code>hAP ac lite</code> uses Bridge VLAN Filtering.</p> <ul> <li>Bridge: Single <code>bridgeLocal</code> with <code>vlan-filtering=yes</code>.</li> <li>Hybrid Ports: </li> <li><code>ether1</code> (Uplink): Tagged for VLANs 10, 20, 99. Native/PVID 666 (Dummy matching Blackhole).</li> <li>WiFi Interfaces: PVID set dynamically or via Bridge Port PVID to drop clients into VLAN 20 (Office) or 10 (Home).</li> </ul>"},{"location":"01_network/03_routing_switching/#3-layer-3-routing-logic","title":"3. Layer 3: Routing Logic","text":""},{"location":"01_network/03_routing_switching/#31-general-routing-ipv4","title":"3.1. General Routing (IPv4)","text":"<ul> <li>Gateway: FortiGate 40F (<code>10.x.x.1</code> on all subnets).</li> <li>Inter-VLAN Routing: Performed by FortiGate. Default DENY. strict firewall policies required to allow traffic.</li> <li>Default Route: <code>0.0.0.0/0</code> via WAN interface (DHCP/PPPoE from ISP).</li> </ul>"},{"location":"01_network/03_routing_switching/#32-ipv6-routing","title":"3.2. IPv6 Routing","text":"<ul> <li>Method: Router Advertisements (RA) with SLAAC/DHCPv6.</li> <li>ULA Advertisement: </li> <li>The FortiGate is configured to advertise the ULA prefix <code>fdb1:6575:ad8a::/48</code> on each interface.</li> <li>Flags: <code>Managed (M)</code> flag OFF, <code>Other (O)</code> flag ON (Stateless DHCPv6 for DNS).</li> <li>Use <code>radvd</code> or FortiOS <code>config ipv6</code> settings to ensure the 'A' (Autonomous) flag is set so clients auto-configure addresses.</li> </ul>"},{"location":"01_network/03_routing_switching/#33-sd-wan-brief","title":"3.3. SD-WAN (Brief)","text":"<p>SD-WAN is enabled to manage traffic prioritization, though currently primarily functioning with a single WAN link for policy abstraction. (See <code>05_sd_wan.md</code> for details).</p>"},{"location":"01_network/04_security/","title":"Security &amp; Policies","text":""},{"location":"01_network/04_security/#1-overview","title":"1. Overview","text":"<p>The security posture follows a Positive Security Model: everything is blocked by default unless explicitly allowed. The FortiGate 40F acts as the Zone-Based Firewall.</p>"},{"location":"01_network/04_security/#2-firewall-zones","title":"2. Firewall Zones","text":"<p>Traffic is grouped by source interface/VLAN to simplify policy management.</p> <ul> <li>Trusted: VLAN 10 (Home), VLAN 20 (Guest)</li> <li>Untrusted: WAN (Internet)</li> <li>Management: VLAN 99</li> <li>Emergency: LAN3 (Physical port for recovery)</li> </ul>"},{"location":"01_network/04_security/#3-firewall-policies","title":"3. Firewall Policies","text":"<p>The following policies are currently active on the FortiGate:</p> ID Name Source Destination Action NAT Services Notes 4 <code>Allow default VLANs to BSI and mail</code> VLAN 10, VLAN 20 <code>virtual-wan-link</code> (Internet) ACCEPT Enabled ICMP, HTTP/S, Email, ScreenConnect General internet access for users. 5 <code>Allow mgmt to everything</code> VLAN 99 ANY ACCEPT Enabled ALL_ICMP, SNMP, SSH, DNS, NTP, etc. Unrestricted admin access. 3 <code>Allow emergency to internet</code> lan3 <code>virtual-wan-link</code> ACCEPT Enabled ALL Emergency internet access. 2 <code>Allow emergency to everywhere</code> lan3 <code>mgmt</code> ACCEPT Disabled ALL Emergency router access."},{"location":"01_network/04_security/#4-security-profiles","title":"4. Security Profiles","text":"<ul> <li>SSL Inspection: Default <code>certificate-inspection</code> (no decryption) is applied to most basic policies.</li> <li>Deep Packet Inspection: Not currently enforced globally to preserve privacy/performance on the 40F.</li> </ul>"},{"location":"01_network/05_sd_wan/","title":"SD-WAN Configuration","text":""},{"location":"01_network/05_sd_wan/#1-overview","title":"1. Overview","text":"<p>Software-Defined WAN (SD-WAN) is used to abstract the underlying WAN connectivity. Even with a single uplink, using the SD-WAN interface (<code>virtual-wan-link</code>) allows for easier policy management and future expansion (e.g., adding LTE failover).</p>"},{"location":"01_network/05_sd_wan/#2-sd-wan-members","title":"2. SD-WAN Members","text":"Interface Alias Status Role wan ISP Uplink Active Primary Gateway"},{"location":"01_network/05_sd_wan/#3-sd-wan-rules","title":"3. SD-WAN Rules","text":"<p>Currently, the default implicit rule is in effect: - Algorithm: Source IP based load balancing (effectively single path with one member). - Destination: <code>0.0.0.0/0</code> redirects to <code>virtual-wan-link</code>.</p>"},{"location":"01_network/05_sd_wan/#4-sla-targets","title":"4. SLA Targets","text":"<p>No specific SLA targets (Jitter/Packet Loss) configured at this time.</p>"},{"location":"01_network/06_wireless/","title":"Wireless Configuration","text":""},{"location":"01_network/06_wireless/#1-overview","title":"1. Overview","text":"<p>Wireless connectivity is provided by a MikroTik HAP ac Lite that I had laying around. The WiFi logic is separate from the routing core (FortiGate), operating in \"Bridge AP\" mode.  </p>"},{"location":"01_network/06_wireless/#2-access-points","title":"2. Access Points","text":"Device Model Location Management IP AP01 MikroTik hAP ac lite Central <code>10.10.99.x</code> (DHCP)"},{"location":"01_network/06_wireless/#3-ssids-frequency-planning","title":"3. SSIDs &amp; Frequency Planning","text":"SSID Band Frequency Channel Width Target VLAN Usage Declerck-Cardon 5 GHz Auto 40 MHz 20 (Guest) Any guest clients"},{"location":"01_network/06_wireless/#4-security-decisions","title":"4. Security Decisions","text":"<ul> <li>Authentication: WPA2-PSK (AES-CCMP).</li> <li>Key: A random password given to guests.</li> <li>Isolation: Client-to-Client forwarding is allowed by default on the AP Bridge, but Inter-VLAN traffic is blocked by the Firewall.</li> </ul>"},{"location":"01_network/06_wireless/#5-implementation-logic-mikrotik","title":"5. Implementation Logic (MikroTik)","text":"<p>The generic MikroTik implementation places all wireless clients into a specific VLAN tag at the AP ingress. - PVID/VLAN Mapping: <code>wlan1</code> and <code>wlan2</code> interfaces are set with PVID=20. - Bridge Filtering: The bridge tags frames from these interfaces with VLAN 20 before sending them up the trunk to the Core Switch.</p>"},{"location":"01_network/overview/","title":"Network Infrastructure","text":""},{"location":"01_network/overview/#1-overview","title":"1. Overview","text":"<p>This document details the network topology, addressing schemes, and security policies for the Packetflow Homelab. The network provides an (un)stable experimental environment while also serving my Home WiFi. It's subject to many changes and should not be considered a production environment.</p> <p>Key Stats: * Primary Domain: <code>packetflow.be</code> (Subdomain: <code>lab.internal.packetflow.be</code>) * Router/Firewall: FortiGate 40F * Core Switch: Ubiquiti EdgeSwitch 8 PoE * Wireless: MikroTik hAP ac lite * Site CIDR: <code>10.10.0.0/16</code> (Home) * Remote Branch Office CIDR: <code>10.20.0.0/16</code> (Not yet implemented)</p>"},{"location":"01_network/overview/#2-basic-principles","title":"2. Basic Principles","text":"<p>The design and maintenance of this network adhere to the following core principles:</p> <ol> <li>Strict Segmentation: <ul> <li>The \"Home office\" network (<code>10.10.0.0/16</code>) is distinct from the reserved \"Remote branch office\" range (<code>10.20.0.0/16</code>).   </li> <li>All VLANs are separated from each other.  </li> </ul> </li> <li>Default Deny security policy: <ul> <li>The firewall operates on a \"deny-by-default\" basis.  </li> <li>Traffic is only permitted if explicitly defined in the policy table; the default action is <code>DROP</code>.  </li> </ul> </li> <li>Management isolation: <ul> <li>Management interfaces (Switching, Routing, IPMI) are restricted to VLAN 99.  </li> </ul> </li> <li>Physical security: <ul> <li>Unused switch ports and the native VLAN on trunks are assigned to VLAN 666 (Blackhole) to prevent unauthorized physical access.  </li> </ul> </li> </ol>"},{"location":"01_network/overview/#3-network-topology","title":"3. Network Topology","text":""},{"location":"01_network/overview/#layer-1-physical-topology","title":"Layer 1: Physical Topology","text":"<p>The physical connection diagram without any IP addresses.</p> <p>[Image Placeholder: Physical Topology Diagram]</p>"},{"location":"01_network/overview/#layer-2-data-link-topology","title":"Layer 2: Data Link Topology","text":"<p>The data link layer configuration, including VLANs.</p> <p>[Image Placeholder: Data Link Topology Diagram]</p>"}]}